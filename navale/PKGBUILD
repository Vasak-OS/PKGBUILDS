# Maintainer: Joaquin (Pato) Decima <jdecima@vasak.net.ar>

pkgname=navale
pkgver=0.1.1
pkgrel=1
pkgdesc="Task Bar for Vasak OS"
url="https://github.com/Vasak-OS/$pkgname/"
depends=(
    'nwjs'
    'bootstrap'
    'libvasak-ui'
    'libvasak-vue'
    'hydriam'
    'python-dbus'
    'python-gobject'
    'python-xlib'
)
makedepends=(
    'nodejs'
    'npm'
)
license=('GPL')
arch=('x86_64')
md5sums=('b0783f5b464e5fd3532f4a556d39d16a')
source=("$url/archive/refs/tags/$pkgver.tar.gz")

package() {
    cd $pkgname-$pkgver
    install -dm755 $pkgdir/usr/share/$pkgname/
    cp -r $srcdir/$pkgname-$pkgver/* $pkgdir/usr/share/$pkgname/
    cd $pkgdir/usr/share/$pkgname/ && npm i
    chmod a+x $pkgdir/usr/share/$pkgname/$pkgname
    sudo ln -sf /usr/share/$pkgname/$pkgname /bin/$pkgname
}
